<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Portfólio AI | Celcino Caldeira</title>
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Biblioteca de Ícones (Lucide) -->
    <script src="https://unpkg.com/lucide-react@latest/dist/umd/lucide.js"></script>
    <script>
      tailwind.config = {
        theme: {
          extend: {
            fontFamily: {
              sans: ['Inter', 'sans-serif'],
            },
            colors: {
              'brand-primary': '#00A9FF', // Um azul elétrico, tecnológico
              'brand-secondary': '#3D52A0',
              'brand-dark': '#081A3A',
              'brand-light': '#CDF5FD',
            },
            animation: {
              'pulse-slow': 'pulse 4s cubic-bezier(0.4, 0, 0.6, 1) infinite',
              'slide-in-bottom': 'slide-in-bottom 0.5s cubic-bezier(0.250, 0.460, 0.450, 0.940) both',
            },
            keyframes: {
              'slide-in-bottom': {
                '0%': { transform: 'translateY(100px)', opacity: '0' },
                '100%': { transform: 'translateY(0)', opacity: '1' },
              },
            }
          }
        }
      }
    </script>
    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;700;900&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #030712; /* Quase preto */
            color: #f3f4f6; /* Cinza claro */
        }
        /* Custom scrollbar */
        ::-webkit-scrollbar {
            width: 8px;
        }
        ::-webkit-scrollbar-track {
            background: #0f172a; /* Fundo do scroll */
        }
        ::-webkit-scrollbar-thumb {
            background: #1e3a8a; /* Cor do scroll */
            border-radius: 4px;
        }
        ::-webkit-scrollbar-thumb:hover {
            background: #3b82f6; /* Cor do scroll ao passar o mouse */
        }
        .chat-bubble-ai {
            background-color: #1f2937; /* Cinza escuro */
            border-radius: 20px 20px 20px 5px;
        }
        .chat-bubble-user {
            background-color: #1e3a8a; /* Azul escuro */
            color: white;
            border-radius: 20px 20px 5px 20px;
        }
    </style>
</head>
<body class="antialiased">

    <div class="relative min-h-screen">
        
        <!-- Background Glow Effect -->
        <div class="absolute top-0 left-0 w-full h-full overflow-hidden z-0">
            <div class="absolute top-1/4 left-1/4 w-96 h-96 bg-brand-primary rounded-full filter blur-3xl opacity-10 animate-pulse-slow"></div>
            <div class="absolute bottom-1/4 right-1/4 w-96 h-96 bg-brand-secondary rounded-full filter blur-3xl opacity-10 animate-pulse-slow animation-delay-4000"></div>
        </div>

        <div class="relative z-10 max-w-7xl mx-auto p-4 md:p-8">

            <!-- === SEÇÃO 1: CABEÇALHO E INTRODUÇÃO === -->
            <header class="flex flex-col md:flex-row justify-between items-start md:items-center py-8 border-b border-gray-800">
                <div>
                    <h1 class="text-4xl md:text-5xl font-bold text-white">Celcino Caldeira</h1>
                    <h2 class="text-xl md:text-2xl text-brand-primary font-medium mt-2">
                        Especialista em IA & Análise de Dados
                    </h2>
                    <p class="text-gray-400 mt-2 text-lg">
                        Formado em Análise e Desenvolvimento de Sistemas.
                    </p>
                </div>
                <div class="flex space-x-4 mt-6 md:mt-0">
                    <a href="#" class="p-3 bg-gray-800 rounded-lg text-gray-300 hover:text-white hover:bg-brand-primary transition-all duration-300" title="LinkedIn">
                        <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 24 24"><path d="M19 0h-14c-2.761 0-5 2.239-5 5v14c0 2.761 2.239 5 5 5h14c2.762 0 5-2.239 5-5v-14c0-2.761-2.238-5-5-5zm-11 19h-3v-11h3v11zm-1.5-12.268c-.966 0-1.75-.79-1.75-1.764s.784-1.764 1.75-1.764 1.75.79 1.75 1.764-.783 1.764-1.75 1.764zm13.5 12.268h-3v-5.604c0-3.368-4-3.113-4 0v5.604h-3v-11h3v1.765c1.396-2.586 7-2.777 7 2.476v6.759z"/></svg>
                    </a>
                    <a href="#" class="p-3 bg-gray-800 rounded-lg text-gray-300 hover:text-white hover:bg-brand-primary transition-all duration-300" title="GitHub">
                        <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 24 24"><path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.109-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"/></svg>
                    </a>
                    <a href="mailto:celcino.caldeira@email.com" class="p-3 bg-gray-800 rounded-lg text-gray-300 hover:text-white hover:bg-brand-primary transition-all duration-300" title="Email">
                        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"></path></svg>
                    </a>
                </div>
            </header>

            <!-- === SEÇÃO 2: O PORTFÓLIO INTERATIVO (IA) === -->
            <main class="mt-12">
                <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
                    
                    <!-- Coluna Esquerda: O Chatbot -->
                    <div class="lg:col-span-2 bg-gray-900 border border-gray-800 rounded-xl shadow-2xl shadow-brand-dark/50 flex flex-col" style="height: 70vh;">
                        <!-- Cabeçalho do Chat -->
                        <div class="p-4 border-b border-gray-700 flex items-center space-x-3">
                            <div class="relative flex items-center justify-center w-10 h-10 rounded-full bg-brand-primary">
                                <i data-lucide="brain-circuit" class="w-6 h-6 text-white"></i>
                                <span class="absolute bottom-0 right-0 w-3 h-3 bg-green-500 border-2 border-gray-900 rounded-full"></span>
                            </div>
                            <div>
                                <h3 class="font-bold text-white">Assistente AI de Celcino</h3>
                                <p class="text-sm text-gray-400">Online | Pronto para ajudar</p>
                            </div>
                        </div>

                        <!-- Área de Mensagens -->
                        <div id="chat-messages" class="flex-1 p-4 md:p-6 space-y-4 overflow-y-auto">
                            <!-- Mensagem de Boas-Vindas da IA -->
                            <div class="flex justify-start animate-slide-in-bottom" style="animation-delay: 0.5s;">
                                <div class="chat-bubble-ai p-4 max-w-lg">
                                    <p class="font-bold mb-1">Assistente AI</p>
                                    <p class="text-gray-200">
                                        Olá! Eu sou o assistente de portfólio do Celcino Caldeira. Fui treinado com as informações, projetos e habilidades dele.
                                    </p>
                                    <p class="mt-3 text-gray-200">
                                        Pergunte-me qualquer coisa sobre sua carreira. Por exemplo:
                                    </p>
                                    <div class="mt-3 flex flex-wrap gap-2">
                                        <button class="suggested-prompt text-xs bg-gray-700 hover:bg-gray-600 text-gray-200 px-3 py-1 rounded-full transition-all">"Quais seus principais projetos de IA?"</button>
                                        <button class="suggested-prompt text-xs bg-gray-700 hover:bg-gray-600 text-gray-200 px-3 py-1 rounded-full transition-all">"Fale sobre sua formação"</button>
                                        <button class="suggested-prompt text-xs bg-gray-700 hover:bg-gray-600 text-gray-200 px-3 py-1 rounded-full transition-all">"Quais tecnologias ele domina?"</button>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Mensagens dinâmicas serão injetadas aqui -->
                            
                            <!-- Indicador de "digitando" -->
                            <div id="loading-indicator" class="hidden flex justify-start">
                                <div class="chat-bubble-ai p-4 max-w-lg">
                                    <div class="flex items-center space-x-2">
                                        <div class="w-2 h-2 bg-brand-primary rounded-full animate-pulse"></div>
                                        <div class="w-2 h-2 bg-brand-primary rounded-full animate-pulse" style="animation-delay: 0.2s;"></div>
                                        <div class="w-2 h-2 bg-brand-primary rounded-full animate-pulse" style="animation-delay: 0.4s;"></div>
                                    </div>
                                </div>
                            </div>

                        </div>

                        <!-- Input do Chat -->
                        <div class="p-4 border-t border-gray-700 bg-gray-900 rounded-b-xl">
                            <div class="flex items-center space-x-3">
                                <input type="text" id="chat-input" placeholder="Pergunte sobre minhas habilidades, projetos, formação..." class="flex-1 w-full bg-gray-800 border border-gray-700 rounded-lg px-4 py-3 text-gray-200 placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-brand-primary focus:border-transparent transition-all">
                                <button id="send-button" class="p-3 bg-brand-primary text-white rounded-lg hover:bg-opacity-80 transition-all duration-300 disabled:opacity-50 disabled:cursor-not-allowed">
                                    <i data-lucide="send" class="w-6 h-6"></i>
                                </button>
                            </div>
                        </div>
                    </div>

                    <!-- Coluna Direita: Sobre Mim e Skills -->
                    <div class="space-y-8">
                        <!-- Sobre Mim -->
                        <div class="bg-gray-900 border border-gray-800 rounded-xl shadow-lg p-6 animate-slide-in-bottom" style="animation-delay: 0.2s;">
                            <h3 class="text-2xl font-bold text-white mb-4 flex items-center">
                                <i data-lucide="user" class="w-6 h-6 mr-3 text-brand-primary"></i>
                                Sobre Mim
                            </h3>
                            <p class="text-gray-300 leading-relaxed">
                                Sou um profissional de tecnologia formado em <strong>Análise e Desenvolvimento de Sistemas</strong>, com foco e paixão em <strong>Inteligência Artificial</strong> e <strong>Análise de Dados</strong>.
                            </p>
                            <p class="text-gray-300 leading-relaxed mt-4">
                                Meu objetivo é aplicar meu conhecimento para construir soluções inovadoras que transformam dados em decisões estratégicas. Estou preparado e atualizado para enfrentar os desafios mais complexos do mercado.
                            </p>
                        </div>
                        
                        <!-- Principais Habilidades -->
                        <div class="bg-gray-900 border border-gray-800 rounded-xl shadow-lg p-6 animate-slide-in-bottom" style="animation-delay: 0.4s;">
                            <h3 class="text-2xl font-bold text-white mb-6 flex items-center">
                                <i data-lucide="bar-chart-3" class="w-6 h-6 mr-3 text-brand-primary"></i>
                                Principais Habilidades
                            </h3>
                            <div class="flex flex-wrap gap-3">
                                <span class="skill-tag">Inteligência Artificial</span>
                                <span class="skill-tag">Machine Learning</span>
                                <span class="skill-tag">Análise de Dados</span>
                                <span class="skill-tag">Python (Pandas, Scikit-learn)</span>
                                <span class="skill-tag">TensorFlow / Keras</span>
                                <span class="skill-tag">SQL (PostgreSQL, MySQL)</span>
                                <span class="skill-tag">Data Visualization (Power BI, Matplotlib)</span>
                                <span class="skill-tag">Engenharia de Prompt</span>
                                <span class="skill-tag">Desenvolvimento Web (JS, React)</span>
                                <span class="skill-tag">APIs (FastAPI, Flask)</span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- === SEÇÃO 3: PROJETOS EM DESTAQUE === -->
                <section class="mt-16">
                    <h2 class="text-3xl font-bold text-white mb-8 text-center md:text-left">Projetos em Destaque</h2>
                    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
                        
                        <!-- Projeto 1 -->
                        <div class="project-card animate-slide-in-bottom" style="animation-delay: 0.6s;">
                            <div class="p-6">
                                <h3 class="text-xl font-bold text-white">Análise Preditiva de Churn</h3>
                                <p class="text-gray-400 mt-2 mb-4 h-20">
                                    Desenvolvimento de um modelo de Machine Learning para prever a probabilidade de clientes cancelarem um serviço, permitindo ações de retenção proativas.
                                </p>
                                <div class="flex flex-wrap gap-2">
                                    <span class="tech-tag">IA</span>
                                    <span class="tech-tag">Scikit-learn</span>
                                    <span class="tech-tag">Python</span>
                                    <span class="tech-tag">Análise de Dados</span>
                                </div>
                            </div>
                        </div>

                        <!-- Projeto 2 -->
                        <div class="project-card animate-slide-in-bottom" style="animation-delay: 0.8s;">
                            <div class="p-6">
                                <h3 class="text-xl font-bold text-white">Sistema de Recomendação (NLP)</h3>
                                <p class="text-gray-400 mt-2 mb-4 h-20">
                                    Implementação de um motor de recomendação baseado em Processamento de Linguagem Natural (NLP) para sugerir produtos com base em descrições e reviews de usuários.
                                </p>
                                <div class="flex flex-wrap gap-2">
                                    <span class="tech-tag">IA</span>
                                    <span class="tech-tag">NLP</span>
                                    <span class="tech-tag">TensorFlow</span>
                                    <span class="tech-tag">FastAPI</span>
                                </div>
                            </div>
                        </div>

                        <!-- Projeto 3 -->
                        <div class="project-card animate-slide-in-bottom" style="animation-delay: 1.0s;">
                            <div class="p-6">
                                <h3 class="text-xl font-bold text-white">Dashboard Interativo de Vendas</h3>
                                <p class="text-gray-400 mt-2 mb-4 h-20">
                                    Criação de um dashboard em Power BI conectado a um Data Warehouse, oferecendo insights em tempo real sobre performance de vendas e tendências de mercado.
                                </p>
                                <div class="flex flex-wrap gap-2">
                                    <span class="tech-tag">Data Viz</span>
                                    <span class="tech-tag">Power BI</span>
                                    <span class="tech-tag">SQL</span>
                                    <span class="tech-tag">ETL</span>
                                </div>
                            </div>
                        </div>

                    </div>
                </section>
            </main>

            <!-- === SEÇÃO 4: FOOTER === -->
            <footer class="text-center py-12 mt-16 border-t border-gray-800">
                <p class="text-gray-500">
                    &copy; <span id="current-year"></span> Celcino Caldeira. 
                    <br class="md:hidden">
                    Construído com paixão por tecnologia e IA.
                </p>
            </footer>

        </div>
    </div>

    <!-- Estilos CSS Injetados (para componentes dinâmicos) -->
    <style>
        .skill-tag {
            @apply bg-brand-secondary text-brand-light text-sm font-medium px-4 py-2 rounded-lg transition-all duration-300 cursor-default shadow-md;
        }
        .project-card {
            @apply bg-gray-900 border border-gray-800 rounded-xl shadow-lg overflow-hidden transition-all duration-300;
            @apply hover:shadow-brand-primary/20 hover:border-brand-primary/50 hover:-translate-y-1;
        }
        .tech-tag {
            @apply bg-gray-800 text-brand-primary text-xs font-semibold px-3 py-1 rounded-full;
        }
    </style>

    <!-- Script Principal (Lógica do Chatbot) -->
    <script type="module">
        // --- LÓGICA DO CHATBOT (Definições) ---
        // Deixamos as definições de funções e constantes que não dependem do DOM aqui.

        // A "Base de Conhecimento" do Celcino para a IA
        const systemPrompt = `
            Você é um assistente de IA profissional e prestativo, representando Celcino Caldeira em seu portfólio.
            Sua única função é responder perguntas sobre a carreira, habilidades e projetos de Celcino, com base estritamente nas informações a seguir.
            Seja amigável, profissional e direto ao ponto.
            NÃO invente informações. Se a pergunta for sobre algo fora deste contexto (ex: "qual a previsão do tempo?"), responda educadamente que você só pode fornecer informações sobre a carreira de Celcino.

            --- BASE DE CONHECIMENTO ---

            1.  **Informação Pessoal:**
                * Nome: Celcino Caldeira
                * Foco: Inteligência Artificial e Análise de Dados.
                * Objetivo: Aplicar conhecimento para construir soluções inovadoras que transformam dados em decisões estratégicas.
                * Status: Preparado, atualizado e disponível para novos desafios.

            2.  **Formação Acadêmica:**
                * Curso: Curso Superior de Tecnologia em Análise e Desenvolvimento de Sistemas.
                * Descrição: Uma formação sólida que forneceu a base de lógica de programação, engenharia de software e gerenciamento de sistemas.

            3.  **Habilidades Técnicas Principais:**
                * **IA & Machine Learning:** Domínio de conceitos de ML (Regressão, Classificação, Clustering), Deep Learning e Processamento de Linguagem Natural (NLP).
                * **Linguagens & Ferramentas:**
                    * Python (nível avançado): Uso extensivo de bibliotecas como Pandas, NumPy, Scikit-learn, TensorFlow e Keras.
                    * SQL (nível avançado): Experiência com PostgreSQL, MySQL e SQL Server para consulta, manipulação e ETL de dados.
                * **Data Visualization:**
                    * Power BI (nível avançado): Criação de dashboards interativos e relatórios complexos.
                    * Outras: Matplotlib, Seaborn.
                * **Desenvolvimento & APIs:**
                    * JavaScript, React (para front-end e visualização).
                    * FastAPI, Flask (para servir modelos de IA como APIs).
                * **Conceitos:** Engenharia de Prompt, MLOps (conceitos básicos), ETL (Extract, Transform, Load).

            4.  **Projetos em Destaque:**
                * **Projeto 1: Análise Preditiva de Churn**
                    * Objetivo: Prever a probabilidade de clientes (churn) de um serviço de assinatura.
                    * Tecnologias: Python, Scikit-learn (usando modelos como Logistic Regression e Random Forest), Pandas.
                    * Resultado: O modelo alcançou 85% de acurácia, permitindo ao time de retenção focar em clientes de alto risco.
                * **Projeto 2: Sistema de Recomendação (NLP)**
                    * Objetivo: Construir um motor de recomendação para um e-commerce fictício, baseado em descrições e reviews de produtos.
                    * Tecnologias: NLP (TF-IDF, Word2Vec), TensorFlow/Keras, FastAPI.
                    * Resultado: Uma API RESTful que recebe o ID de um produto e retorna os 5 produtos mais similares.
                * **Projeto 3: Dashboard Interativo de Vendas**
                    * Objetivo: Centralizar e visualizar dados de vendas de múltiplas fontes.
                    * Tecnologias: Power BI, SQL (para criar as views e o Data Mart), processos de ETL.
                    * Resultado: Um dashboard que permite à gerência filtrar vendas por região, produto e período, identificando tendências em tempo real.

            --- FIM DA BASE DE CONHECIMENTO ---

            Responda à pergunta do usuário com base nessas informações.
        `;

        // Função para adicionar mensagem ao chat
        function addMessage(sender, message) {
            // Os elementos são buscados no momento da execução da função,
            // então eles precisam estar disponíveis no DOM nesse momento.
            const chatMessages = document.getElementById('chat-messages');
            if (!chatMessages) return; 

            const messageDiv = document.createElement('div');
            messageDiv.classList.add('flex', 'animate-slide-in-bottom');
            
            let bubbleClass = '';
            let content = '';

            if (sender === 'user') {
                messageDiv.classList.add('justify-end');
                bubbleClass = 'chat-bubble-user';
                content = `<p>${message}</p>`;
            } else {
                messageDiv.classList.add('justify-start');
                bubbleClass = 'chat-bubble-ai';
                // Processa markdown simples (negrito)
                message = message.replace(/\*\*(.*?)\*\*/g, '<strong>$1</strong>');
                // Processa markdown simples (listas)
                message = message.replace(/\n\s*-\s/g, '<br>• ');
                content = `<p class="font-bold mb-1">Assistente AI</p><p class="text-gray-200">${message}</p>`;
            }

            messageDiv.innerHTML = `
                <div class="${bubbleClass} p-4 max-w-lg">
                    ${content}
                </div>
            `;
            chatMessages.appendChild(messageDiv);
            chatMessages.scrollTop = chatMessages.scrollHeight; // Auto-scroll
        }

        // Função para lidar com o envio da query
        async function handleQuery() {
            // Busca os elementos do DOM no momento da execução
            const chatInput = document.getElementById('chat-input');
            const sendButton = document.getElementById('send-button');
            const loadingIndicator = document.getElementById('loading-indicator');

            if (!chatInput || !sendButton || !loadingIndicator) {
                console.error("Elementos do chat não encontrados.");
                return;
            }

            const userQuery = chatInput.value.trim();
            if (userQuery === "") return;

            addMessage('user', userQuery);
            chatInput.value = "";
            sendButton.disabled = true;
            loadingIndicator.classList.remove('hidden');

            try {
                const aiResponse = await fetchAIResponse(userQuery);
                addMessage('ai', aiResponse);
            } catch (error) {
                console.error("Erro ao chamar a API:", error);
                addMessage('ai', "Desculpe, estou com um problema de conexão no momento. Por favor, tente novamente mais tarde.");
            } finally {
                loadingIndicator.classList.add('hidden');
                sendButton.disabled = false;
                chatInput.focus();
            }
        }

        // Função para chamar η API Gemini (com retentativa)
        async function fetchAIResponse(userQuery, retries = 3, delay = 1000) {
            const apiKey = ""; // Deixe em branco, será tratado pelo ambiente
            const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-09-2025:generateContent?key=${apiKey}`;

            const payload = {
                contents: [{ parts: [{ text: userQuery }] }],
                systemInstruction: {
                    parts: [{ text: systemPrompt }]
                },
            };

            try {
                const response = await fetch(apiUrl, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(payload)
                });

                if (!response.ok) {
                    if (response.status === 429 && retries > 0) {
                        // Erro de "Too Many Requests" (rate limiting), tenta novamente
                        await new Promise(res => setTimeout(res, delay));
                        return fetchAIResponse(userQuery, retries - 1, delay * 2); // Backoff exponencial
                    }
                    throw new Error(`Erro da API: ${response.status} ${response.statusText}`);
                }

                const result = await response.json();
                
                if (result.candidates && result.candidates[0].content?.parts?.[0]?.text) {
                    return result.candidates[0].content.parts[0].text;
                } else {
                    // Resposta inesperada ou vazia
                    console.warn("Resposta inesperada da API:", result);
                    throw new Error("Resposta da API mal formatada.");
                }

            } catch (error) {
                if (retries > 0) {
                    // Erro de rede, tenta novamente
                    await new Promise(res => setTimeout(res, delay));
                    return fetchAIResponse(userQuery, retries - 1, delay * 2);
                }
                console.error("Erro final ao buscar resposta da IA:", error);
                throw error;
            }
        }
        
        // --- INICIALIZAÇÃO ---
        // Espera o DOM estar completamente carregado para executar o código de inicialização.
        document.addEventListener('DOMContentLoaded', () => {
            
            // 1. Inicializa os ícones
            // Verifica se a biblioteca 'lucide' foi carregada (ela é global)
            if (typeof lucide !== 'undefined') {
                lucide.createIcons();
            } else {
                console.error("Biblioteca Lucide não carregada. Ícones não serão exibidos.");
            }

            // 2. Atualiza o ano no footer
            const currentYearEl = document.getElementById('current-year');
            if (currentYearEl) {
                currentYearEl.textContent = new Date().getFullYear();
            }

            // 3. Adiciona os Event Listeners
            const chatInput = document.getElementById('chat-input');
            const sendButton = document.getElementById('send-button');
            const suggestedPromptButtons = document.querySelectorAll('.suggested-prompt');
            
            if(sendButton) {
                sendButton.addEventListener('click', handleQuery);
            } else {
                console.error("Botão 'send-button' não encontrado.");
            }
            
            if(chatInput) {
                chatInput.addEventListener('keydown', (e) => {
                    if (e.key === 'Enter') {
                        handleQuery();
                    }
                });
            } else {
                console.error("Campo 'chat-input' não encontrado.");
            }

            if(suggestedPromptButtons) {
                suggestedPromptButtons.forEach(button => {
                    button.addEventListener('click', () => {
                        // Re-busca o chatInput aqui por segurança
                        const input = document.getElementById('chat-input');
                        if(input) {
                           const prompt = button.innerText.replace(/"/g, ''); // Limpa as aspas
                           input.value = prompt;
                           handleQuery();
                        }
                    });
                });
            }
        });

    </script>
</body>

</html>

